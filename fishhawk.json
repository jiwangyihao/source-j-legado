[
  {
    "bookSourceComment": "ä»…æ”¯æŒç½‘ç»œå°è¯´ï¼ˆéžæ–‡åº“æœ¬ï¼‰\n\né…·å®‰ @å‰çŽ‹ä¹‰æ˜Š\nGitHubï¼šhttps://github.com/jiwangyihao/source-j-legado\n\n# å…³äºŽè®¸å¯çš„é¢å¤–å£°æ˜Žï¼ˆåœ¨çº¿ç‰ˆæœ¬å‚è§ GitHubï¼Œä»¥åœ¨çº¿ç‰ˆæœ¬ä¸ºå‡†ï¼‰\n\n- å½“è®¸å¯è¯ä¸Žæœ¬å£°æ˜Žå†²çªæ—¶ï¼Œä»¥æœ¬å£°æ˜Žä¸ºå‡†ï¼›\n- å¯¹äºŽæœ¬ä»“åº“ä¸­çš„ä»»æ„ä»£ç ç‰‡æ®µï¼šæŒ‰ç…§ `MPL 2.0` ä¸­æœ‰å…³çº¦å®šæ‰§è¡Œï¼›\n- å¯¹äºŽæœ¬ä»“åº“ä¸­çš„æŸä¸€å®Œæ•´ä¹¦æºçš„è½¬è½½æˆ–äºŒæ¬¡å¼€å‘ï¼Œéœ€æ»¡è¶³ä»¥ä¸‹å…¨éƒ¨æ¡ä»¶ï¼š\n  - åœ¨[æœ¬ä»“åº“](https://github.com/jiwangyihao/source-j-legado)çš„ `issue` ä¸­æå‡ºè¯·æ±‚å¹¶å…·ä½“è¯´æ˜Žè½¬è½½åœ°å€ã€äºŒæ¬¡å¼€å‘åŽçš„ä¹¦æºå¼€æºåœ°å€ä»¥åŠå…¶ä»–å¿…è¦ä¿¡æ¯ï¼›\n  - ç­‰å¾…åŽŸä½œè€…ï¼ˆå³æœ¬ä»“åº“çš„åˆå§‹æ‰€æœ‰è€…å’Œåˆå§‹ä»£ç è´¡çŒ®è€… [@jiwangyihao](https://github.com/jiwangyihao)ï¼‰æŸ¥çœ‹å¹¶é€šè¿‡ `issue` æˆ–ä¾æ®åŽŸä½œè€…è¦æ±‚æ›´æ”¹è½¬è½½æ–¹å¼æˆ–è¡¥å……æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚\n  - è€ƒè™‘åˆ°æœ¬é¡¹ç›®å¼ƒå‘çš„å¯èƒ½ï¼Œæ–° `issue` å¼€å¯åŽè¶…è¿‡ 20 ä¸ªå·¥ä½œæ—¥åŽŸä½œè€…æ²¡æœ‰å›žå¤æˆ–è€…åŽŸä½œè€…å›žå¤è¦æ±‚æ›´æ”¹çš„ `issue` åœ¨æ›´æ”¹åŽè¶…è¿‡ 20 ä¸ªå·¥ä½œæ—¥åŽŸä½œè€…æ²¡æœ‰å›žå¤å³è§†ä¸ºåŽŸä½œè€…é€šè¿‡è¯¥ `issue`ï¼š\n    - æ­¤å¤„çš„ `issue` ä»…åŒ…æ‹¬åœ¨[æœ¬ä»“åº“](https://github.com/jiwangyihao/source-j-legado)å¼€å¯çš„ï¼Œå¤„äºŽã€Œå¼€å¯çŠ¶æ€ã€çš„ issueã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œè¯·ä¸è¦åœ¨å·²ç»å…³é—­çš„ issue ä¸­å›žå¤ï¼‰ã€‚\n    - å¯¹äºŽæ­¤ç§æ–¹å¼é€šè¿‡çš„ issueï¼Œè½¬è½½/äºŒæ¬¡å¼€å‘è€…ä»åº”å½“éµå®ˆæœ¬å£°æ˜Žä¸­å·²ç»å†™æ˜Žçš„ç›¸å…³çº¦å®šã€‚\n  - ä¸å¾—ä¸Šä¼ è‡³æºä»“åº“æˆ–æ•´ç†è‡³`éžè½»å°è¯´ä¸“ç”¨`çš„ä¹¦æºåˆé›†ä¸­å¹¶åº”å½“é¿å…å…¶ä»–äººå°†è½¬è½½/äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ä¸Šä¼ è‡³æºä»“åº“æˆ–æ•´ç†è‡³`éžè½»å°è¯´ä¸“ç”¨`çš„ä¹¦æºåˆé›†ä¸­ï¼š\n    - å…³äºŽè½»å°è¯´çš„å®šä¹‰çš„é¢å¤–è¯´æ˜Žï¼šä¸åŒ…æ‹¬å›½å†…çš„åŽŸåˆ›ç½‘ç»œæ–‡å­¦ä½œå“ï¼ˆå¦‚ `SF è½»å°è¯´` ä¸­çš„åŽŸåˆ›è½»å°è¯´ä»¥åŠ`èµ·ç‚¹ä¸­æ–‡ç½‘`ä¸­æ ‡ç­¾åŒ…å«è½»å°è¯´çš„ä½œå“ï¼‰ã€‚\n    - è½»å°è¯´ä¸“ç”¨çš„å®šä¹‰ï¼šæœ‰ä¸”ä»…æœ‰æƒ³çœ‹è½»å°è¯´çš„äººå¯èƒ½ä¼šæ·»åŠ ã€‚\n  - å¿…é¡»åœ¨è½¬è½½/äºŒæ¬¡å¼€å‘åœ°å€çš„æ˜Žæ˜¾ä½ç½®å®Œæ•´åŒ…å«æœ¬å£°æ˜Žçš„å…¨éƒ¨å†…å®¹ã€‚\n  - å¿…é¡»ä¿ç•™æºæ³¨é‡Šä¸­åŽŸæœ‰çš„æ›´æ”¹è®°å½•ã€‚\n\n2024.4.10\né…·å®‰ @å‰çŽ‹ä¹‰æ˜Š\nå¤„ç†ç›®å½•ä¸­çš„å·å\nè§£å†³äº†ç« èŠ‚ä¸­çš„å¼•å·å¯¼è‡´åŠ è½½ç›®å½•å¤±è´¥çš„é—®é¢˜\n2024.5.7\né…·å®‰ @å‰çŽ‹ä¹‰æ˜Š\næ”¯æŒç™»å½•\næ”¯æŒç½‘ç«™é˜…è¯»åŽ†å²\næ”¯æŒæ”¶è—ï¼ˆå¤šæ”¶è—å¤¹ï¼‰\næ–°å¢žå‘çŽ°\n2024.5.31\né…·å®‰ @å‰çŽ‹ä¹‰æ˜Š\nä¿®æ­£ä¼˜å…ˆçº§åºåˆ—æ¨¡å¼ä¸‹æ„å¤–å¿½ç•¥åŽç»­ç¿»è¯‘æºçš„é—®é¢˜",
    "bookSourceGroup": "è½»å°è¯´,æœºç¿»",
    "bookSourceName": "è½»å°è¯´æœºç¿»ðŸ¤–",
    "bookSourceType": 0,
    "bookSourceUrl": "https://books.fishhawk.top/",
    "customOrder": 3,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js:\nresult=[\n  {\n    'title': '>> ä¸ªäººä¸­å¿ƒ <<',\n    'url': \"\",\n    'style':{\n      layout_flexGrow:1,\n      layout_flexBasisPercent:1\n    }\n  },\n  {\n    'title': \"é˜…è¯»åŽ†å²\",\n    'url': `/api/user/read-history?page={{page-1}}&pageSize=30`,\n    'style':{\n      layout_flexGrow:2,\n      layout_flexBasisPercent:0.25\n    \t}\n  }\n]\nfavored = String(java.ajax(source.bookSourceUrl + \"/api/user/favored\"))\nif (favored.match(\"Tokenä¸åˆæ³•æˆ–è€…è¿‡æœŸ\")) {\n  result[0].title = '>> ä¸ªäººä¸­å¿ƒ | æœªç™»å½• <<'\n} else {\n  favored = JSON.parse(java.ajax(source.bookSourceUrl + \"/api/user/favored\")).web\n  favored.forEach(favor => {\n    result.push({\n      'title': favor.title,\n      'url': `/api/user/favored-web/${favor.id}?page={{page-1}}&pageSize=30&sort=update`,\n      'style':{\n        layout_flexGrow:2,\n        layout_flexBasisPercent:0.25\n      \t}\n    })\n  })\n}\nString(java.ajax(`https://mirror.ghproxy.com/https://raw.githubusercontent.com/FishHawk/auto-novel/main/web/src/pages/list/components/menu.ts, {\n  \"headers\": {\n    \"Authorization\": \"\"\n  }\n}`))\n.match(/menuOption\\(.+\\)/gi).forEach((menu,index)=>{\n  if (index>0) {\n    title=menu.replace(/menuOption\\('(.+)',.?'(.+)'\\)/gi, \"$1\")\n    href=menu.replace(/menuOption\\('(.+)',.?'(.+)'\\)/gi, \"$2\")\n    result.push({\n    'title': `>> ${title} <<`,\n    'url': \"\",\n    'style':{\n      layout_flexGrow:1,\n      layout_flexBasisPercent:1\n    }\n  })\n    html = org.jsoup.Jsoup.parse(String(java.webView(null,source.bookSourceUrl + href.replace(/^\\//i,''),null)))\n    sorts = html.select(\".n-layout-scroll-container .n-flex h1 + div + div.n-flex > .n-flex\")\n    sorts[0].select(\".n-flex > .n-flex > .n-flex > span\").forEach(tag => {\n      result.push({\n        'title': tag.text(),\n        'url': href.replace(/\\/(.+)\\/(.+)\\/(.+)/gi, \"$3\") != \"2\" ? `/api/novel/rank/${href.replace(/\\/(.+)\\/(.+)\\/(.+)/gi, \"$2\")}?type=${title.replace(/(.+)ï¼š(.+)/gi,\"$2\").replace(\"å¼‚ä¸–ç•Œè½¬ç§»/è½¬ç”Ÿ\", \"å¼‚ä¸–ç•Œè½¬ç”Ÿ/è½¬ç§»\")}&genre=${tag.text()}&range=æ€»è®¡&status=å…¨éƒ¨&page={{page-1}}` : `/api/novel/rank/${href.replace(/\\/(.+)\\/(.+)\\/(.+)/gi, \"$2\")}?type=${title.replace(/(.+)ï¼š(.+)/gi,\"$2\")}&range=${tag.text()}&status=å…¨éƒ¨&page={{page-1}}`,\n        'style':{\n          layout_flexGrow:2,\n          layout_flexBasisPercent:0.4\n        \t}\n      })\n    \t})\n  }\n})\nJSON.stringify(result)",
    "jsLib": "function getConfig() {\n  const { book, source, java } = this\n  const config = {\n  \t  language: \"ä¸­æ—¥\",\n  \t  translation: \"SGYB\",\n  \t  translationArr: []\n  \t}\n  \tconst languages = [\n  \t  \"æ—¥æ–‡\",\n    \"ä¸­æ–‡\",\n    \"ä¸­æ—¥\",\n    \"æ—¥ä¸­\"\n  ]\n  const translations = {\n  \t  B: \"baiduParagraphs\",\n  \t  Y: \"youdaoParagraphs\",\n  \t  G: \"gptParagraphs\",\n  \t  S: \"sakuraParagraphs\"\n  \t}\n  \tfunction applyTran(tranStr) {\n  \t  config.translation=tranStr\n  \t  if (tranStr===\"å¹¶åˆ—\") tranStr=\"SGYB\"\n  \t  let tranArr = []\n  \t  for (let i=0; i<tranStr.length; i++) {\n  \t  \t  tranArr.push(translations[tranStr.charAt(i)])\n  \t  \t}\n  \t  \tconfig.translationArr=tranArr\n  \t}\n  \tfunction applyLanguage(lang) {\n  \t  if (languages.includes(lang))\n  \t  \t  config.language=lang\n  \t}\n  \tapplyTran(config.translation)\n  sVar = String(source.getVariable()).replace(/\\s/gi, '').split('-')\n  if (sVar[0]) applyLanguage(sVar[0])\n  if (sVar[1]) applyTran(sVar[1])\n  bVar = String(book.getVariable(\"custom\")).replace(/\\s/gi, '').split('-')\n  if (bVar[0]) applyLanguage(bVar[0])\n  if (bVar[1]) applyTran(bVar[1])\n  return config\n}",
    "lastUpdateTime": 1717127015449,
    "loginUi": "[\n  {\n    \"name\": \"è´¦å·\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"å¯†ç \",\n    \"type\": \"password\"\n  }\n]",
    "loginUrl": "@js:\nfunction login() {\n  let une = source.getLoginInfoMap().get(\"è´¦å·\")\n  let pwd = source.getLoginInfoMap().get(\"å¯†ç \")\n  if (une && pwd) {\n    let body = JSON.stringify({\n      emailOrUsername: une,\n      password: pwd\n    })\n    let url = source.bookSourceUrl + '/api/auth/sign-in'\n    let res = java.post(url, body, {\n      \"Content-Type\": \"application/json\"\n    })\n    if (res.body().match(/é”™è¯¯/gi)) {\n      throw(res.body())\n    }\n    result = JSON.parse(res.body())\n    \n    let header = JSON.stringify({\n      \"Authorization\": \"Bearer \" + result.token\n    })\n    source.putLoginHeader(header)\n  }\n}",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "$.authors.*.name",
      "init": "@js:\nresult=JSON.parse(result)\nresult.points+=' PT'\nresult.visited+=' æµè§ˆ'\nJSON.stringify(result)",
      "intro": "å½“å‰è§„åˆ™ï¼šè¯­è¨€å±•çŽ°å½¢å¼-{{getConfig().language}}ï¼Œç¿»è¯‘ä¼˜å…ˆçº§-{{getConfig().translation}}ï¼ˆå¯åœ¨æºå˜é‡æˆ–ä¹¦ç±å˜é‡ä¸­ä¿®æ”¹ï¼Œè¯¦æƒ…å‚è€ƒå˜é‡è¯´æ˜Žï¼‰\n\n{{$.titleJp}}\næ€»è®¡ï¼š{{$.total}} ç™¾åº¦ï¼š{{$.baidu}} æœ‰é“ï¼š{{$.youdao}} GPTï¼š{{$.gpt}} Sakuraï¼š{{$.sakura}}\n\n{{$.introductionZh}}\n\n{{$.introductionJp}}",
      "kind": "$.attentions&&$.type&&$.points&&$.visited&&$.keywords",
      "lastChapter": "{{$.toc[-1].chapterId}} - {{$.toc[-1].titleZh}}",
      "name": "$.titleZh",
      "wordCount": "$.totalCharacters"
    },
    "ruleContent": {
      "content": "@js:\nresult=JSON.parse(result)\nconfig=getConfig()\nresult.paragraphs.map((p, i) => {\n  function generateTran(i) {\n    const chars = {\n  \t    baiduParagraphs: \"áµ‡\",\n  \t    youdaoParagraphs: \"Ê¸\",\n  \t    gptParagraphs: \"áµ\",\n  \t    sakuraParagraphs: \"Ë¢\"\n    }\n    if (config.translation===\"å¹¶åˆ—\") {\n      return config.translationArr.map(\n        t => result[t] ? (result[t][i]!=\"\" ? chars[t] : \"\") + result[t][i] : \"\"\n      ).join(\"\\n\")\n    } else {\n      for (let tt=0; tt<config.translationArr.length; tt++) {\n        let t=config.translationArr[tt]\n        if (result[t]) return (result[t][i]!=\"\" ? chars[t] : \"\") + result[t][i]\n      }\n    }\n  \t}\n  switch (String(config.language)) {\n  \t  case \"æ—¥æ–‡\":\n  \t    return p\n  \t  case \"ä¸­æ–‡\":\n  \t    return generateTran(i)\n  \t  case \"ä¸­æ—¥\":\n  \t    return [generateTran(i), p].join(\"\\n\")\n  \t  case \"æ—¥ä¸­\":\n  \t    return [p, generateTran(i)].join(\"\\n\")\n  \t}\n}).join('\\n')"
    },
    "ruleExplore": {},
    "ruleSearch": {
      "bookList": "$.items",
      "bookUrl": "https://books.fishhawk.top/api/novel/{{$.providerId}}/{{$.novelId}}",
      "checkKeyWord": "è½¬ç”Ÿç¬¬ä¸ƒçŽ‹å­",
      "intro": "{{$.titleJp}}\næ€»è®¡ï¼š{{$.total}} ç™¾åº¦ï¼š{{$.baidu}} æœ‰é“ï¼š{{$.youdao}} GPTï¼š{{$.gpt}} Sakuraï¼š{{$.sakura}}",
      "kind": "$.attentions&&$.type&&$.keywords",
      "lastChapter": "@js:\n`{{$.total}} - ` + new Date(parseInt({{$.updateAt}}) * 1000).toJSON().replace(/T|\\.\\d+Z/gi, ' ')",
      "name": "$.titleZh"
    },
    "ruleToc": {
      "chapterList": "$.toc",
      "chapterName": "@js:\n`{{$.chapterId}}` ? `{{$.chapterId}} - {{$.titleZh}}` : `{{$.titleZh}} - {{$.titleJp}}`",
      "chapterUrl": "@js:\n`{{$.chapterId}}` ? `{{baseUrl}}/chapter/{{$.chapterId}}` : ''",
      "isVolume": "@js:\n!`{{$.chapterId}}`",
      "updateTime": "@js:\n`{{$.chapterId}}` ? (`{{$.titleJp}} - ` + (`{{$.createAt}}` ? new Date(parseInt({{$.createAt}}) * 1000).toJSON().replace(/T|\\.\\d+Z/gi, ' ') : 'æš‚æ— ')) : ''"
    },
    "searchUrl": "https://books.fishhawk.top/api/novel?page={{page-1}}&pageSize=20&query={{key}}&provider=kakuyomu%2Csyosetu%2Cnovelup%2Chameln%2Cpixiv%2Calphapolis&level=0&type=0&translate=0&sort=0",
    "variableComment": "è®¾ç½®æ­£æ–‡è¯­è¨€å±•çŽ°å½¢å¼åŠç¿»è¯‘ä¼˜å…ˆçº§\nï¼é”™è¯¯çš„è®¾ç½®å¯èƒ½å¯¼è‡´ä¹¦æºå·¥ä½œä¸æ­£å¸¸\næ ¼å¼ï¼šè¯­è¨€å±•çŽ°å½¢å¼ - ç¿»è¯‘ä¼˜å…ˆçº§\n\nè¯­è¨€å±•çŽ°å½¢å¼ï¼š\n- æ—¥æ–‡\n- ä¸­æ–‡\n- ä¸­æ—¥\n- æ—¥ä¸­\nç¿»è¯‘ä¼˜å…ˆçº§ï¼š\n- å¹¶åˆ—ï¼ˆå±•ç¤ºæ‰€æœ‰å­˜åœ¨çš„ç¿»è¯‘ï¼‰\n- ä¼˜å…ˆçº§åºåˆ—ï¼Œå†™åœ¨å‰é¢çš„ä¼˜å…ˆé‡‡ç”¨ï¼ŒB-ç™¾åº¦ã€Y-æœ‰é“ã€G-GPTã€S-Sakuraï¼Œå¦‚ `SGYB`\n\nç¤ºä¾‹ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸­æ—¥ - SGYB\nç¤ºä¾‹ï¼šä¸­æ–‡ - å¹¶åˆ—",
    "weight": 0
  }
]